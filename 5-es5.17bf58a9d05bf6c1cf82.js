!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{MwFL:function(t,n,r){"use strict";r.r(n),r.d(n,"DataModule",function(){return $});var s=r("ofXK"),a=r("3Pt+"),o=r("tyNb"),l=function e(){c(this,e)},u=function e(){c(this,e),this.deck=void 0,this.player=void 0,this.place=void 0},b=r("fXoL"),h=r("aceb"),f=r("Oz8O"),p=r("QIP1"),d=r("VdwR"),y=function e(){c(this,e),this.name=null,this.color=null,this.archtype=null,this.format=null},v=function e(){c(this,e),this.name=null};function m(e,t){if(1&e){var n=b.Tb();b.Sb(0,"input",5),b.Zb("ngModelChange",function(e){b.oc(n);var t=b.bc().$implicit;return b.bc().insertObj[t.objectKey]=e}),b.Rb()}if(2&e){var i=b.bc().$implicit,c=b.bc();b.ic("placeholder",i.name),b.hc("ngModel",c.insertObj[i.objectKey])}}function g(e,t){if(1&e&&(b.Sb(0,"nb-option",8),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n),b.Bb(1),b.yc(n)}}function k(e,t){if(1&e){var n=b.Tb();b.Sb(0,"nb-select",6),b.Zb("selectedChange",function(e){b.oc(n);var t=b.bc().$implicit;return b.bc().insertObj[t.objectKey]=e}),b.vc(1,g,2,2,"nb-option",7),b.Rb()}if(2&e){var i=b.bc().$implicit,c=b.bc();b.hc("selected",c.insertObj[i.objectKey]),b.Bb(1),b.hc("ngForOf",i.choices)}}function S(e,t){if(1&e&&(b.Sb(0,"nb-option",8),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n),b.Bb(1),b.yc(n)}}function L(e,t){if(1&e){var n=b.Tb();b.Sb(0,"nb-select",9),b.Zb("selectedChange",function(e){b.oc(n);var t=b.bc().$implicit;return b.bc().insertObj[t.objectKey]=e}),b.vc(1,S,2,2,"nb-option",7),b.Rb()}if(2&e){var i=b.bc().$implicit,c=b.bc();b.hc("selected",c.insertObj[i.objectKey]),b.Bb(1),b.hc("ngForOf",i.choices)}}function w(e,t){if(1&e&&(b.Sb(0,"div"),b.Sb(1,"p"),b.xc(2),b.Rb(),b.vc(3,m,1,2,"input",2),b.vc(4,k,2,2,"nb-select",3),b.vc(5,L,2,2,"nb-select",4),b.Rb()),2&e){var n=t.$implicit;b.Bb(2),b.yc(n.name),b.Bb(1),b.hc("ngIf","string"===n.format),b.Bb(1),b.hc("ngIf","singleSelect"===n.format),b.Bb(1),b.hc("ngIf","multiSelect"===n.format)}}var O,j=((O=function(){function e(t,n,i,r){c(this,e),this.windowRef=t,this.playerService=n,this.deckService=i,this.toastrService=r,this.fieldList=[],this.MAX_STRING_LENGTH=50}return i(e,[{key:"ngOnInit",value:function(){"Deck"===this.objectType&&(this.insertObj=new y),"Player"===this.objectType&&(this.insertObj=new v)}},{key:"insertObject",value:function(){var e=this;this.checkForNullsAndLength()&&this.determineAndPost().then(function(t){e.toastrService.show("Posted Sucessfully.","Success",{status:"success"}),e.windowRef.close()})}},{key:"checkForNullsAndLength",value:function(){for(var e in this.insertObj)if(this.insertObj.hasOwnProperty(e)){if(null===this.insertObj[e]||""===this.insertObj[e])return this.toastrService.show("Not all Fields have been filled out.","Error",{status:"danger"}),!1;if("string"==typeof this.insertObj[e]&&this.insertObj[e].length>this.MAX_STRING_LENGTH)return this.toastrService.show("String values must be less then 15 characters long.","Error",{status:"danger"}),!1}return!0}},{key:"determineAndPost",value:function(){return e=this,n=regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"Deck"===this.objectType?this.deckService.postDeck(this.insertObj).subscribe(function(e){t.deckService.getNewDeckList()}):"Player"===this.objectType&&this.playerService.postPlayer(this.insertObj).subscribe(function(e){t.playerService.getNewPlayerList()});case 1:case"end":return e.stop()}},e,this)}),new((t=void 0)||(t=Promise))(function(i,c){function r(e){try{a(n.next(e))}catch(t){c(t)}}function s(e){try{a(n.throw(e))}catch(t){c(t)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,s)}a((n=n.apply(e,[])).next())});var e,t,n}}]),e}()).\u0275fac=function(e){return new(e||O)(b.Mb(h.G),b.Mb(p.a),b.Mb(f.a),b.Mb(h.E))},O.\u0275cmp=b.Gb({type:O,selectors:[["app-insert-form"]],inputs:{objectType:"objectType",fieldList:"fieldList"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["nbButton","","status","success",3,"click"],["type","text","nbInput","","fullWidth","","shape","semi-round",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],["placeholder","Select",3,"selected","selectedChange",4,"ngIf"],["multiple","","placeholder","Select",3,"selected","selectedChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","shape","semi-round",3,"ngModel","placeholder","ngModelChange"],["placeholder","Select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","","placeholder","Select",3,"selected","selectedChange"]],template:function(e,t){1&e&&(b.vc(0,w,6,4,"div",0),b.Sb(1,"button",1),b.Zb("click",function(){return t.insertObject()}),b.xc(2,"Create"),b.Rb()),2&e&&b.hc("ngForOf",t.fieldList)},directives:[s.m,h.f,s.n,a.a,a.e,a.h,h.w,h.v],styles:[""]}),O);function C(e,t){if(1&e&&(b.Sb(0,"nb-option",6),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n._id),b.Bb(1),b.yc(n.name)}}function P(e,t){if(1&e&&(b.Sb(0,"nb-option",6),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n._id),b.Bb(1),b.yc(n.name)}}function R(e,t){if(1&e&&(b.Sb(0,"nb-option",6),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n),b.Bb(1),b.yc(n)}}var B,x=((B=function(){function e(t,n,i){c(this,e),this.windowService=t,this.deckService=n,this.playerService=i,this.deckList=[],this.playerList=[],this.numberList=[],this.participant=null}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.deckService.deckList.subscribe(function(t){e.deckList=t}),this.playerService.playerList.subscribe(function(t){e.playerList=t})}},{key:"playerChange",value:function(e){this.participant.player=this.playerList.find(function(t){return t._id===e})}},{key:"deckChange",value:function(e){this.participant.deck=this.deckList.find(function(t){return t._id===e})}},{key:"placementChange",value:function(e){this.participant.place=Number(e)}},{key:"addPlayer",value:function(){this.windowService.open(j,{title:"Add Player",context:{fieldList:[{name:"Name",format:"string",objectKey:"name"}],objectType:"Player"}})}},{key:"addDeck",value:function(){this.windowService.open(j,{title:"Add Deck",context:{fieldList:[{name:"Name",format:"string",objectKey:"name"},{name:"Archtype",format:"string",objectKey:"archtype"},{name:"Color",format:"multiSelect",choices:["White","Blue","Black","Red","Green","Colorless"],objectKey:"color"},{name:"Format",format:"singleSelect",choices:["Standard","Modern","Commander","Other"],objectKey:"format"}],objectType:"Deck"}})}}]),e}()).\u0275fac=function(e){return new(e||B)(b.Mb(h.H),b.Mb(f.a),b.Mb(p.a))},B.\u0275cmp=b.Gb({type:B,selectors:[["app-form"]],inputs:{deckList:"deckList",playerList:"playerList",numberList:"numberList",participant:"participant"},decls:16,vars:5,consts:[["placeholder","Select Player",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbButton","","ghost","","status","success",3,"click"],["icon","plus-circle-outline"],["placeholder","Select Deck",3,"selected","selectedChange"],["placeholder","Select Placement",3,"selectedChange"],[3,"value"]],template:function(e,t){1&e&&(b.Sb(0,"h3"),b.xc(1,"Input Player"),b.Rb(),b.Sb(2,"nb-select",0),b.Zb("selectedChange",function(e){return t.playerChange(e)})("selectedChange",function(e){return t.selectedPlayerId=e}),b.vc(3,C,2,2,"nb-option",1),b.Rb(),b.Sb(4,"button",2),b.Zb("click",function(){return t.addPlayer()}),b.Nb(5,"nb-icon",3),b.Rb(),b.Sb(6,"h3"),b.xc(7,"Input Deck"),b.Rb(),b.Sb(8,"nb-select",4),b.Zb("selectedChange",function(e){return t.deckChange(e)})("selectedChange",function(e){return t.selectedDeckId=e}),b.vc(9,P,2,2,"nb-option",1),b.Rb(),b.Sb(10,"button",2),b.Zb("click",function(){return t.addDeck()}),b.Nb(11,"nb-icon",3),b.Rb(),b.Sb(12,"h3"),b.xc(13,"Placement"),b.Rb(),b.Sb(14,"nb-select",5),b.Zb("selectedChange",function(e){return t.placementChange(e)}),b.vc(15,R,2,2,"nb-option",1),b.Rb()),2&e&&(b.Bb(2),b.hc("selected",t.selectedPlayerId),b.Bb(1),b.hc("ngForOf",t.playerList),b.Bb(5),b.hc("selected",t.selectedDeckId),b.Bb(1),b.hc("ngForOf",t.deckList),b.Bb(6),b.hc("ngForOf",t.numberList))},directives:[h.w,s.m,h.f,h.k,h.v],styles:[""]}),B);function F(e,t){if(1&e&&(b.Sb(0,"nb-option",8),b.xc(1),b.Rb()),2&e){var n=t.$implicit;b.ic("value",n),b.Bb(1),b.yc(n)}}function I(e,t){if(1&e&&(b.Sb(0,"nb-layout-column"),b.Nb(1,"app-form",9),b.Rb()),2&e){var n=t.index,i=b.bc();b.Bb(1),b.hc("deckList",i.deckList)("playerList",i.playerList)("numberList",i.numberList)("participant",i.participantList[n])}}var M,T,N,A=function(){return[]},D=[{path:"",component:(M=function(){function t(e,n,i,r){c(this,t),this.toastrService=e,this.deckService=n,this.playerService=i,this.gameService=r,this.deckList=[],this.playerList=[],this.participantList=[],this.types=["Modern","Commander","Standard"],this.selectedType=null,this.numberList=[1,2],this.numberOfPlayers=2}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.deckService.getDecks().subscribe(function(t){e.deckList=t,e.deckService.deckList.next(t)}),this.playerService.getPlayerNames().subscribe(function(t){e.playerList=t,e.playerService.playerList.next(t)}),this.playerService.playerList.subscribe(function(t){null!==t&&(e.playerList=t)}),this.deckService.deckList.subscribe(function(t){null!==t&&(e.deckList=t)}),this.participantList.push(new u),this.participantList.push(new u)}},{key:"addPlayer",value:function(){this.numberOfPlayers<4&&(this.participantList.push(new u),this.numberOfPlayers++,this.numberList.push(this.numberOfPlayers))}},{key:"subPlayer",value:function(){this.numberOfPlayers>2&&(this.participantList.pop(),this.numberList.pop(),this.numberOfPlayers--)}},{key:"submitGame",value:function(){var t=this;try{this.errorCheck();var n=new l;n.winner=this.participantList.find(function(e){return 1===e.place}),n.loser=[];var i,c=e(this.participantList);try{for(c.s();!(i=c.n()).done;){var r=i.value;1!==r.place&&n.loser.push(r)}}catch(s){c.e(s)}finally{c.f()}n.type=this.selectedType,this.gameService.submitNewGame(n).subscribe(function(e){t.toastrService.show("Posted Sucessfully.","Success",{status:"success"})})}catch(a){this.toastrService.show(a,"Error",{status:"danger"})}}},{key:"errorCheck",value:function(){try{this.nullCheck(),this.repeatedValueCheck(this.playerList,"player"),this.repeatedValueCheck(this.deckList,"deck"),this.placementCheck()}catch(e){throw e}}},{key:"placementCheck",value:function(){var t,n=Object.assign([],this.numberList),i=e(this.participantList);try{for(i.s();!(t=i.n()).done;){var c=t.value,r=n.indexOf(c.place);if(-1===r)throw"Each placement must be unique";n.splice(r,1)}}catch(s){i.e(s)}finally{i.f()}}},{key:"repeatedValueCheck",value:function(t,n){var i,c=Object.assign([],t),r=e(this.participantList);try{for(r.s();!(i=r.n()).done;){var s=i.value,a=c.indexOf(s[n]);if(-1===a)throw"Each value in a field must be unique";c.splice(a,1)}}catch(o){r.e(o)}finally{r.f()}}},{key:"nullCheck",value:function(){var t,n=e(this.participantList);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(void 0===i.place||void 0===i.deck||void 0===i.player||void 0===i.place)throw"Not all Participant fields are filled out"}}catch(c){n.e(c)}finally{n.f()}if(null===this.selectedType)throw"No Type Selected"}}]),t}(),M.\u0275fac=function(e){return new(e||M)(b.Mb(h.E),b.Mb(f.a),b.Mb(p.a),b.Mb(d.a))},M.\u0275cmp=b.Gb({type:M,selectors:[["app-data"]],decls:12,vars:4,consts:[["nbButton","","status","success",3,"click"],["nbButton","","ghost","","status","success",3,"click"],["icon","plus-circle-outline"],["nbButton","","ghost","","status","danger",3,"click"],["icon","minus-circle-outline"],["placeholder","Select Type",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[3,"deckList","playerList","numberList","participant"]],template:function(e,t){1&e&&(b.Sb(0,"h2"),b.xc(1,"Game Input"),b.Rb(),b.Sb(2,"button",0),b.Zb("click",function(){return t.submitGame()}),b.xc(3,"Submit"),b.Rb(),b.Sb(4,"button",1),b.Zb("click",function(){return t.addPlayer()}),b.Nb(5,"nb-icon",2),b.Rb(),b.Sb(6,"button",3),b.Zb("click",function(){return t.subPlayer()}),b.Nb(7,"nb-icon",4),b.Rb(),b.Sb(8,"nb-select",5),b.Zb("selectedChange",function(e){return t.selectedType=e}),b.vc(9,F,2,2,"nb-option",6),b.Rb(),b.Sb(10,"nb-layout"),b.vc(11,I,2,4,"nb-layout-column",7),b.Rb()),2&e&&(b.Bb(8),b.hc("selected",t.selectedType),b.Bb(1),b.hc("ngForOf",t.types),b.Bb(2),b.hc("ngForOf",b.jc(3,A).constructor(t.numberOfPlayers)))},directives:[h.f,h.k,h.w,s.m,h.p,h.v,h.o,x],styles:[""]}),M)}],K=((N=function e(){c(this,e)}).\u0275mod=b.Kb({type:N}),N.\u0275inj=b.Jb({factory:function(e){return new(e||N)},imports:[[o.g.forChild(D)],o.g]}),N),$=((T=function e(){c(this,e)}).\u0275mod=b.Kb({type:T}),T.\u0275inj=b.Jb({factory:function(e){return new(e||T)},imports:[[a.b,s.c,K,h.x,h.g,h.m,h.s,h.F.forChild()]]}),T)}}])}();