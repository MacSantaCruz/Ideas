(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{MwFL:function(e,t,i){"use strict";i.r(t),i.d(t,"DataModule",function(){return F});var c=i("ofXK"),n=i("3Pt+"),s=i("tyNb");class r{}class l{constructor(){this.deck=void 0,this.player=void 0,this.place=void 0}}var o=i("fXoL"),a=i("aceb"),b=i("Oz8O"),h=i("QIP1"),u=i("VdwR");class p{constructor(){this.name=null,this.color=null,this.archtype=null,this.format=null}}class d{constructor(){this.name=null}}function f(e,t){if(1&e){const e=o.Tb();o.Sb(0,"input",5),o.Zb("ngModelChange",function(t){o.oc(e);const i=o.bc().$implicit;return o.bc().insertObj[i.objectKey]=t}),o.Rb()}if(2&e){const e=o.bc().$implicit,t=o.bc();o.ic("placeholder",e.name),o.hc("ngModel",t.insertObj[e.objectKey])}}function y(e,t){if(1&e&&(o.Sb(0,"nb-option",8),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e),o.Bb(1),o.yc(e)}}function m(e,t){if(1&e){const e=o.Tb();o.Sb(0,"nb-select",6),o.Zb("selectedChange",function(t){o.oc(e);const i=o.bc().$implicit;return o.bc().insertObj[i.objectKey]=t}),o.vc(1,y,2,2,"nb-option",7),o.Rb()}if(2&e){const e=o.bc().$implicit,t=o.bc();o.hc("selected",t.insertObj[e.objectKey]),o.Bb(1),o.hc("ngForOf",e.choices)}}function g(e,t){if(1&e&&(o.Sb(0,"nb-option",8),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e),o.Bb(1),o.yc(e)}}function v(e,t){if(1&e){const e=o.Tb();o.Sb(0,"nb-select",9),o.Zb("selectedChange",function(t){o.oc(e);const i=o.bc().$implicit;return o.bc().insertObj[i.objectKey]=t}),o.vc(1,g,2,2,"nb-option",7),o.Rb()}if(2&e){const e=o.bc().$implicit,t=o.bc();o.hc("selected",t.insertObj[e.objectKey]),o.Bb(1),o.hc("ngForOf",e.choices)}}function S(e,t){if(1&e&&(o.Sb(0,"div"),o.Sb(1,"p"),o.xc(2),o.Rb(),o.vc(3,f,1,2,"input",2),o.vc(4,m,2,2,"nb-select",3),o.vc(5,v,2,2,"nb-select",4),o.Rb()),2&e){const e=t.$implicit;o.Bb(2),o.yc(e.name),o.Bb(1),o.hc("ngIf","string"===e.format),o.Bb(1),o.hc("ngIf","singleSelect"===e.format),o.Bb(1),o.hc("ngIf","multiSelect"===e.format)}}let k=(()=>{class e{constructor(e,t,i,c){this.windowRef=e,this.playerService=t,this.deckService=i,this.toastrService=c,this.fieldList=[],this.MAX_STRING_LENGTH=50}ngOnInit(){"Deck"===this.objectType&&(this.insertObj=new p),"Player"===this.objectType&&(this.insertObj=new d)}insertObject(){this.checkForNullsAndLength()&&this.determineAndPost().then(e=>{this.toastrService.show("Posted Sucessfully.","Success",{status:"success"}),this.windowRef.close()})}checkForNullsAndLength(){for(let e in this.insertObj)if(this.insertObj.hasOwnProperty(e)){if(null===this.insertObj[e]||""===this.insertObj[e])return this.toastrService.show("Not all Fields have been filled out.","Error",{status:"danger"}),!1;if("string"==typeof this.insertObj[e]&&this.insertObj[e].length>this.MAX_STRING_LENGTH)return this.toastrService.show("String values must be less then 15 characters long.","Error",{status:"danger"}),!1}return!0}determineAndPost(){return e=this,void 0,i=function*(){"Deck"===this.objectType?this.deckService.postDeck(this.insertObj).subscribe(e=>{this.deckService.getNewDeckList()}):"Player"===this.objectType&&this.playerService.postPlayer(this.insertObj).subscribe(e=>{this.playerService.getNewPlayerList()})},new((t=void 0)||(t=Promise))(function(c,n){function s(e){try{l(i.next(e))}catch(t){n(t)}}function r(e){try{l(i.throw(e))}catch(t){n(t)}}function l(e){var i;e.done?c(e.value):(i=e.value,i instanceof t?i:new t(function(e){e(i)})).then(s,r)}l((i=i.apply(e,[])).next())});var e,t,i}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(a.G),o.Mb(h.a),o.Mb(b.a),o.Mb(a.E))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-insert-form"]],inputs:{objectType:"objectType",fieldList:"fieldList"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["nbButton","","status","success",3,"click"],["type","text","nbInput","","fullWidth","","shape","semi-round",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],["placeholder","Select",3,"selected","selectedChange",4,"ngIf"],["multiple","","placeholder","Select",3,"selected","selectedChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","shape","semi-round",3,"ngModel","placeholder","ngModelChange"],["placeholder","Select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","","placeholder","Select",3,"selected","selectedChange"]],template:function(e,t){1&e&&(o.vc(0,S,6,4,"div",0),o.Sb(1,"button",1),o.Zb("click",function(){return t.insertObject()}),o.xc(2,"Create"),o.Rb()),2&e&&o.hc("ngForOf",t.fieldList)},directives:[c.m,a.f,c.n,n.a,n.e,n.h,a.w,a.v],styles:[""]}),e})();function L(e,t){if(1&e&&(o.Sb(0,"nb-option",6),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e._id),o.Bb(1),o.yc(e.name)}}function w(e,t){if(1&e&&(o.Sb(0,"nb-option",6),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e._id),o.Bb(1),o.yc(e.name)}}function O(e,t){if(1&e&&(o.Sb(0,"nb-option",6),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e),o.Bb(1),o.yc(e)}}let j=(()=>{class e{constructor(e,t,i){this.windowService=e,this.deckService=t,this.playerService=i,this.deckList=[],this.playerList=[],this.numberList=[],this.participant=null}ngOnInit(){this.deckService.deckList.subscribe(e=>{this.deckList=e}),this.playerService.playerList.subscribe(e=>{this.playerList=e})}playerChange(e){this.participant.player=this.playerList.find(t=>t._id===e)}deckChange(e){this.participant.deck=this.deckList.find(t=>t._id===e)}placementChange(e){this.participant.place=Number(e)}addPlayer(){this.windowService.open(k,{title:"Add Player",context:{fieldList:[{name:"Name",format:"string",objectKey:"name"}],objectType:"Player"}})}addDeck(){this.windowService.open(k,{title:"Add Deck",context:{fieldList:[{name:"Name",format:"string",objectKey:"name"},{name:"Archtype",format:"string",objectKey:"archtype"},{name:"Color",format:"multiSelect",choices:["White","Blue","Black","Red","Green","Colorless"],objectKey:"color"},{name:"Format",format:"singleSelect",choices:["Standard","Modern","Commander","Other"],objectKey:"format"}],objectType:"Deck"}})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(a.H),o.Mb(b.a),o.Mb(h.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-form"]],inputs:{deckList:"deckList",playerList:"playerList",numberList:"numberList",participant:"participant"},decls:16,vars:5,consts:[["placeholder","Select Player",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbButton","","ghost","","status","success",3,"click"],["icon","plus-circle-outline"],["placeholder","Select Deck",3,"selected","selectedChange"],["placeholder","Select Placement",3,"selectedChange"],[3,"value"]],template:function(e,t){1&e&&(o.Sb(0,"h3"),o.xc(1,"Input Player"),o.Rb(),o.Sb(2,"nb-select",0),o.Zb("selectedChange",function(e){return t.playerChange(e)})("selectedChange",function(e){return t.selectedPlayerId=e}),o.vc(3,L,2,2,"nb-option",1),o.Rb(),o.Sb(4,"button",2),o.Zb("click",function(){return t.addPlayer()}),o.Nb(5,"nb-icon",3),o.Rb(),o.Sb(6,"h3"),o.xc(7,"Input Deck"),o.Rb(),o.Sb(8,"nb-select",4),o.Zb("selectedChange",function(e){return t.deckChange(e)})("selectedChange",function(e){return t.selectedDeckId=e}),o.vc(9,w,2,2,"nb-option",1),o.Rb(),o.Sb(10,"button",2),o.Zb("click",function(){return t.addDeck()}),o.Nb(11,"nb-icon",3),o.Rb(),o.Sb(12,"h3"),o.xc(13,"Placement"),o.Rb(),o.Sb(14,"nb-select",5),o.Zb("selectedChange",function(e){return t.placementChange(e)}),o.vc(15,O,2,2,"nb-option",1),o.Rb()),2&e&&(o.Bb(2),o.hc("selected",t.selectedPlayerId),o.Bb(1),o.hc("ngForOf",t.playerList),o.Bb(5),o.hc("selected",t.selectedDeckId),o.Bb(1),o.hc("ngForOf",t.deckList),o.Bb(6),o.hc("ngForOf",t.numberList))},directives:[a.w,c.m,a.f,a.k,a.v],styles:[""]}),e})();function C(e,t){if(1&e&&(o.Sb(0,"nb-option",8),o.xc(1),o.Rb()),2&e){const e=t.$implicit;o.ic("value",e),o.Bb(1),o.yc(e)}}function P(e,t){if(1&e&&(o.Sb(0,"nb-layout-column"),o.Nb(1,"app-form",9),o.Rb()),2&e){const e=t.index,i=o.bc();o.Bb(1),o.hc("deckList",i.deckList)("playerList",i.playerList)("numberList",i.numberList)("participant",i.participantList[e])}}const R=function(){return[]},B=[{path:"",component:(()=>{class e{constructor(e,t,i,c){this.toastrService=e,this.deckService=t,this.playerService=i,this.gameService=c,this.deckList=[],this.playerList=[],this.participantList=[],this.types=["Modern","Commander","Standard"],this.selectedType=null,this.numberList=[1,2],this.numberOfPlayers=2}ngOnInit(){this.deckService.getDecks().subscribe(e=>{this.deckList=e,this.deckService.deckList.next(e)}),this.playerService.getPlayerNames().subscribe(e=>{this.playerList=e,this.playerService.playerList.next(e)}),this.playerService.playerList.subscribe(e=>{null!==e&&(this.playerList=e)}),this.deckService.deckList.subscribe(e=>{null!==e&&(this.deckList=e)}),this.participantList.push(new l),this.participantList.push(new l)}addPlayer(){this.numberOfPlayers<4&&(this.participantList.push(new l),this.numberOfPlayers++,this.numberList.push(this.numberOfPlayers))}subPlayer(){this.numberOfPlayers>2&&(this.participantList.pop(),this.numberList.pop(),this.numberOfPlayers--)}submitGame(){try{this.errorCheck();let e=new r;e.winner=this.participantList.find(e=>1===e.place),e.loser=[];for(let t of this.participantList)1!==t.place&&e.loser.push(t);e.type=this.selectedType,this.gameService.submitNewGame(e).subscribe(e=>{this.toastrService.show("Posted Sucessfully.","Success",{status:"success"})})}catch(e){this.toastrService.show(e,"Error",{status:"danger"})}}errorCheck(){try{this.nullCheck(),this.repeatedValueCheck(this.playerList,"player"),this.repeatedValueCheck(this.deckList,"deck"),this.placementCheck()}catch(e){throw e}}placementCheck(){let e=Object.assign([],this.numberList);for(let t of this.participantList){let i=e.indexOf(t.place);if(-1===i)throw"Each placement must be unique";e.splice(i,1)}}repeatedValueCheck(e,t){let i=Object.assign([],e);for(let c of this.participantList){let e=i.indexOf(c[t]);if(-1===e)throw"Each value in a field must be unique";i.splice(e,1)}}nullCheck(){for(let e of this.participantList)if(void 0===e.place||void 0===e.deck||void 0===e.player||void 0===e.place)throw"Not all Participant fields are filled out";if(null===this.selectedType)throw"No Type Selected"}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(a.E),o.Mb(b.a),o.Mb(h.a),o.Mb(u.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-data"]],decls:12,vars:4,consts:[["nbButton","","status","success",3,"click"],["nbButton","","ghost","","status","success",3,"click"],["icon","plus-circle-outline"],["nbButton","","ghost","","status","danger",3,"click"],["icon","minus-circle-outline"],["placeholder","Select Type",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[3,"deckList","playerList","numberList","participant"]],template:function(e,t){1&e&&(o.Sb(0,"h2"),o.xc(1,"Game Input"),o.Rb(),o.Sb(2,"button",0),o.Zb("click",function(){return t.submitGame()}),o.xc(3,"Submit"),o.Rb(),o.Sb(4,"button",1),o.Zb("click",function(){return t.addPlayer()}),o.Nb(5,"nb-icon",2),o.Rb(),o.Sb(6,"button",3),o.Zb("click",function(){return t.subPlayer()}),o.Nb(7,"nb-icon",4),o.Rb(),o.Sb(8,"nb-select",5),o.Zb("selectedChange",function(e){return t.selectedType=e}),o.vc(9,C,2,2,"nb-option",6),o.Rb(),o.Sb(10,"nb-layout"),o.vc(11,P,2,4,"nb-layout-column",7),o.Rb()),2&e&&(o.Bb(8),o.hc("selected",t.selectedType),o.Bb(1),o.hc("ngForOf",t.types),o.Bb(2),o.hc("ngForOf",o.jc(3,R).constructor(t.numberOfPlayers)))},directives:[a.f,a.k,a.w,c.m,a.p,a.v,a.o,j],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(B)],s.g]}),e})(),F=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[n.b,c.c,x,a.x,a.g,a.m,a.s,a.F.forChild()]]}),e})()}}]);