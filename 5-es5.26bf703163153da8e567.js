!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{MwFL:function(t,n,r){"use strict";r.r(n),r.d(n,"DataModule",function(){return B});var a=r("ofXK"),s=r("tyNb"),o=function e(){c(this,e)},u=function e(){c(this,e),this.deck=void 0,this.player=void 0,this.place=void 0},l=r("fXoL"),p=r("aceb"),b=r("Oz8O"),f=r("QIP1"),h=r("VdwR");function d(e,t){if(1&e&&(l.Sb(0,"nb-option",4),l.xc(1),l.Rb()),2&e){var n=t.$implicit;l.ic("value",n._id),l.Bb(1),l.yc(n.name)}}function y(e,t){if(1&e&&(l.Sb(0,"nb-option",4),l.xc(1),l.Rb()),2&e){var n=t.$implicit;l.ic("value",n._id),l.Bb(1),l.yc(n.name)}}function v(e,t){if(1&e&&(l.Sb(0,"nb-option",4),l.xc(1),l.Rb()),2&e){var n=t.$implicit;l.ic("value",n),l.Bb(1),l.yc(n)}}var m,k=((m=function(){function e(){c(this,e),this.deckList=[],this.playerList=[],this.numberList=[],this.participant=null}return i(e,[{key:"ngOnInit",value:function(){}},{key:"playerChange",value:function(e){this.participant.player=this.playerList.find(function(t){return t._id===e})}},{key:"deckChange",value:function(e){this.participant.deck=this.deckList.find(function(t){return t._id===e})}},{key:"placementChange",value:function(e){this.participant.place=Number(e)}}]),e}()).\u0275fac=function(e){return new(e||m)},m.\u0275cmp=l.Gb({type:m,selectors:[["app-form"]],inputs:{deckList:"deckList",playerList:"playerList",numberList:"numberList",participant:"participant"},decls:12,vars:5,consts:[["placeholder","Select Player",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Deck",3,"selected","selectedChange"],["placeholder","Select Placement",3,"selectedChange"],[3,"value"]],template:function(e,t){1&e&&(l.Sb(0,"h3"),l.xc(1,"Input Player"),l.Rb(),l.Sb(2,"nb-select",0),l.Zb("selectedChange",function(e){return t.playerChange(e)})("selectedChange",function(e){return t.selectedPlayerId=e}),l.vc(3,d,2,2,"nb-option",1),l.Rb(),l.Sb(4,"h3"),l.xc(5,"Input Deck"),l.Rb(),l.Sb(6,"nb-select",2),l.Zb("selectedChange",function(e){return t.deckChange(e)})("selectedChange",function(e){return t.selectedDeckId=e}),l.vc(7,y,2,2,"nb-option",1),l.Rb(),l.Sb(8,"h3"),l.xc(9,"Placement"),l.Rb(),l.Sb(10,"nb-select",3),l.Zb("selectedChange",function(e){return t.placementChange(e)}),l.vc(11,v,2,2,"nb-option",1),l.Rb()),2&e&&(l.Bb(2),l.hc("selected",t.selectedPlayerId),l.Bb(1),l.hc("ngForOf",t.playerList),l.Bb(3),l.hc("selected",t.selectedDeckId),l.Bb(1),l.hc("ngForOf",t.deckList),l.Bb(4),l.hc("ngForOf",t.numberList))},directives:[p.w,a.m,p.v],styles:[""]}),m);function g(e,t){if(1&e&&(l.Sb(0,"nb-option",8),l.xc(1),l.Rb()),2&e){var n=t.$implicit;l.ic("value",n),l.Bb(1),l.yc(n)}}function L(e,t){if(1&e&&(l.Sb(0,"nb-layout-column"),l.Nb(1,"app-form",9),l.Rb()),2&e){var n=t.index,i=l.bc();l.Bb(1),l.hc("deckList",i.deckList)("playerList",i.playerList)("numberList",i.numberList)("participant",i.participantList[n])}}var S,w,C,O=function(){return[]},P=[{path:"",component:(S=function(){function t(e,n,i,r){c(this,t),this.toastrService=e,this.deckService=n,this.playerService=i,this.gameService=r,this.deckList=[],this.playerList=[],this.participantList=[],this.types=["Modern","Commander","Standard"],this.selectedType=null,this.numberList=[1,2],this.numberOfPlayers=2}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.deckService.getDecks().subscribe(function(t){e.deckList=t}),this.playerService.getPlayerNames().subscribe(function(t){e.playerList=t}),this.participantList.push(new u),this.participantList.push(new u)}},{key:"addPlayer",value:function(){this.numberOfPlayers<4&&(this.participantList.push(new u),this.numberOfPlayers++,this.numberList.push(this.numberOfPlayers))}},{key:"subPlayer",value:function(){this.numberOfPlayers>2&&(this.participantList.pop(),this.numberList.pop(),this.numberOfPlayers--)}},{key:"submitGame",value:function(){var t=this;try{this.errorCheck();var n=new o;n.winner=this.participantList.find(function(e){return 1===e.place}),n.loser=[];var i,c=e(this.participantList);try{for(c.s();!(i=c.n()).done;){var r=i.value;1!==r.place&&n.loser.push(r)}}catch(a){c.e(a)}finally{c.f()}n.type=this.selectedType,this.gameService.submitNewGame(n).subscribe(function(e){t.toastrService.show("Posted Sucessfully.","Success",{status:"success"})})}catch(s){this.toastrService.show(s,"Error",{status:"danger"})}}},{key:"errorCheck",value:function(){try{this.nullCheck(),this.repeatedValueCheck(this.playerList,"player"),this.repeatedValueCheck(this.deckList,"deck"),this.placementCheck()}catch(e){throw e}}},{key:"placementCheck",value:function(){var t,n=Object.assign([],this.numberList),i=e(this.participantList);try{for(i.s();!(t=i.n()).done;){var c=t.value,r=n.indexOf(c.place);if(-1===r)throw"Each placement must be unique";n.splice(r,1)}}catch(a){i.e(a)}finally{i.f()}}},{key:"repeatedValueCheck",value:function(t,n){var i,c=Object.assign([],t),r=e(this.participantList);try{for(r.s();!(i=r.n()).done;){var a=i.value,s=c.indexOf(a[n]);if(-1===s)throw"Each value in a field must be unique";c.splice(s,1)}}catch(o){r.e(o)}finally{r.f()}}},{key:"nullCheck",value:function(){var t,n=e(this.participantList);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(void 0===i.place||void 0===i.deck||void 0===i.player||void 0===i.place)throw"Not all Participant fields are filled out"}}catch(c){n.e(c)}finally{n.f()}if(null===this.selectedPlayerId)throw"No Type Selected"}}]),t}(),S.\u0275fac=function(e){return new(e||S)(l.Mb(p.E),l.Mb(b.a),l.Mb(f.a),l.Mb(h.a))},S.\u0275cmp=l.Gb({type:S,selectors:[["app-data"]],decls:12,vars:4,consts:[["nbButton","","status","success",3,"click"],["nbButton","","ghost","","status","success",3,"click"],["icon","plus-circle-outline"],["nbButton","","ghost","","status","danger",3,"click"],["icon","minus-circle-outline"],["placeholder","Select Type",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[3,"deckList","playerList","numberList","participant"]],template:function(e,t){1&e&&(l.Sb(0,"h2"),l.xc(1,"Game Input"),l.Rb(),l.Sb(2,"button",0),l.Zb("click",function(){return t.submitGame()}),l.xc(3,"Submit"),l.Rb(),l.Sb(4,"button",1),l.Zb("click",function(){return t.addPlayer()}),l.Nb(5,"nb-icon",2),l.Rb(),l.Sb(6,"button",3),l.Zb("click",function(){return t.subPlayer()}),l.Nb(7,"nb-icon",4),l.Rb(),l.Sb(8,"nb-select",5),l.Zb("selectedChange",function(e){return t.selectedType=e}),l.vc(9,g,2,2,"nb-option",6),l.Rb(),l.Sb(10,"nb-layout"),l.vc(11,L,2,4,"nb-layout-column",7),l.Rb()),2&e&&(l.Bb(8),l.hc("selected",t.selectedType),l.Bb(1),l.hc("ngForOf",t.types),l.Bb(2),l.hc("ngForOf",l.jc(3,O).constructor(t.numberOfPlayers)))},directives:[p.f,p.k,p.w,a.m,p.p,p.v,p.o,k],styles:[""]}),S)}],R=((C=function e(){c(this,e)}).\u0275mod=l.Kb({type:C}),C.\u0275inj=l.Jb({factory:function(e){return new(e||C)},imports:[[s.g.forChild(P)],s.g]}),C),B=((w=function e(){c(this,e)}).\u0275mod=l.Kb({type:w}),w.\u0275inj=l.Jb({factory:function(e){return new(e||w)},imports:[[a.c,R,p.x,p.g,p.m,p.s]]}),w)}}])}();